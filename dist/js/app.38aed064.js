(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0da4":function(t,e,a){},1150:function(t,e,a){"use strict";var s=a("7b0c"),i=a.n(s);i.a},"145f":function(t,e,a){},"1ad8":function(t,e,a){"use strict";var s=a("b909"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=(a("f5df1"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Home")],1)}),n=[],r=a("bb51"),o={components:{Home:r["default"]}},l=o,c=(a("5c0b"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null),d=u.exports,f=(a("d3b7"),a("8c4f"));s["a"].use(f["a"]);var m=[{path:"/",name:"Home",component:function(){return Promise.resolve().then(a.bind(null,"bb51"))}}],k=new f["a"]({routes:m}),v=k,_=(a("7db0"),a("c740"),a("4160"),a("a434"),a("159b"),a("5530")),b=a("2909"),p=a("2f62");s["a"].use(p["a"]);var h=new p["a"].Store({state:{tasksData:JSON.parse(localStorage.getItem("tasksData")||"[]"),column:{isNew:!1},task:{}},mutations:{createTask:function(t,e){var a=Object(b["a"])(t.tasksData),s={id:e.id,category:e.category,text:e.text};a.length?a.forEach((function(t){e.colId===t.id&&t.tasks.push(s)})):a.push({id:e.colId,title:"",tasks:[Object(_["a"])({},s)]}),t.tasksData=a,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))},updateTask:function(t,e){var a=e.colId,s=e.id,i=e.category,n=e.text,r=Object(b["a"])(t.tasksData),o=r.findIndex((function(t){return t.id===a})),l=r[o].tasks.findIndex((function(t){return t.id===s}));void 0!==i&&(r[o].tasks[l].category=i),void 0!==n&&(r[o].tasks[l].text=n),t.tasksData=r,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))},deleteTask:function(t,e){var a=e.colId,s=e.id,i=Object(b["a"])(t.tasksData),n=i.findIndex((function(t){return t.id===a})),r=i[n].tasks.findIndex((function(t){return t.id===s}));i[n].tasks.splice(r,1),t.tasksData=i,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))},createColumn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(b["a"])(t.tasksData),s={id:e.id||Date.now(),title:e.title||"Без названия",tasks:e.tasks||[]};a.push(s),t.tasksData=a,localStorage.setItem("tasksData",JSON.stringify(t.tasksData)),t.column.isNew=!0},updateColumnTasks:function(t,e){var a=Object(b["a"])(t.tasksData),s=a.findIndex((function(t){return t.id===e.id})),i=Object(b["a"])(e.tasks);a[s].tasks=i,t.tasksData=a,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))},setColumnTitle:function(t,e){var a=e.id,s=e.title,i=Object(b["a"])(t.tasksData),n=i.findIndex((function(t){return t.id===a}));i[n].title=s,t.tasksData=i,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))},setNewColFlag:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.column.isNew=e},deleteColumn:function(t,e){var a=Object(b["a"])(t.tasksData),s=a.findIndex((function(t){return t.id===e}));a.splice(s,1),t.tasksData=a,localStorage.setItem("tasksData",JSON.stringify(t.tasksData))}},actions:{createTask:function(t,e){var a=t.commit;a("createTask",e)},updateTask:function(t,e){var a=t.commit;a("updateTask",e)},deleteTask:function(t,e){var a=t.commit;a("deleteTask",e)},createColumn:function(t,e){var a=t.commit;a("createColumn",e)},updateColumnTasks:function(t,e){var a=t.commit;a("updateColumnTasks",e)},setColumnTitle:function(t,e){var a=t.commit;a("setColumnTitle",e)},setNewColFlag:function(t,e){var a=t.commit;a("setNewColFlag",e)},deleteColumn:function(t,e){var a=t.commit;a("deleteColumn",e)}},getters:{tasksData:function(t){return t.tasksData},columnTitleById:function(t){return function(e){var a;return null===(a=t.tasksData.find((function(t){return t.id===e})))||void 0===a?void 0:a.title}},taskById:function(t){return function(e){var a,s=e.colId,i=e.id;return null===(a=t.tasksData.find((function(t){return t.id===s})))||void 0===a?void 0:a.tasks.find((function(t){return t.id===i}))}},isNewColAdded:function(t){return t.column.isNew}}});s["a"].config.productionTip=!1,new s["a"]({router:v,store:h,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"6b2b":function(t,e,a){"use strict";var s=a("145f"),i=a.n(s);i.a},"75e2":function(t,e,a){"use strict";var s=a("0da4"),i=a.n(s);i.a},"7b0c":function(t,e,a){},"8e95":function(t,e,a){},9959:function(t,e,a){},"9c0c":function(t,e,a){},a133:function(t,e,a){"use strict";var s=a("8e95"),i=a.n(s);i.a},b909:function(t,e,a){},bb51:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-page"},[a("Header"),a("FilterBar"),a("LeftSidebar"),a("TaskList")],1)},i=[],n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"logo header__logo"},[a("span",[t._v("N")])]),a("div",{staticClass:"header__content"},[a("form",{staticClass:"form"},[a("div",{staticClass:"form__search form-search"},[a("input",{staticClass:"form-search__input",attrs:{type:"text",placeholder:"Search",title:"Поиск"}}),a("button",{staticClass:"form-search__btn",attrs:{type:"submit",title:"Искать"}})])])])])}],o={name:"Header"},l=o,c=(a("a133"),a("2877")),u=Object(c["a"])(l,n,r,!1,null,"9770988a",null),d=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left-sidebar"},[a("nav",{staticClass:"left-sidebar__nav nav"},[a("ul",{staticClass:"nav__list"},[a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{tag:"a",to:"/","active-class":"nav__link--active",exact:""}},[a("span",{staticClass:"nav__link-img nav__link-img--home"}),a("span",{staticClass:"nav__link-text"},[t._v("Главная")])])],1),a("li",{staticClass:"nav__item"},[a("router-link",{staticClass:"nav__link",attrs:{tag:"a",to:"/settings","active-class":"nav__link--active"}},[a("span",{staticClass:"nav__link-img nav__link-img--settings"}),a("span",{staticClass:"nav__link-text"},[t._v("Опции")])])],1)])])])},m=[],k={name:"LeftSidebar"},v=k,_=(a("1150"),Object(c["a"])(v,f,m,!1,null,"1279fb7e",null)),b=_.exports,p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-bar"},[a("label",{staticClass:"filter-bar__title",attrs:{for:"filter-form-select"}},[t._v("Фильтр")]),a("form",{staticClass:"filter-bar__form filter-form"},[a("div",{staticClass:"filter-bar__select filter-form-select"},[a("select",{attrs:{id:"filter-form-select",title:"Фильтр"}},[a("option",{attrs:{value:"completed"}},[t._v("Завершенные")]),a("option",{attrs:{value:"inwork"}},[t._v("В работе")]),a("option",{attrs:{value:"all"}},[t._v("Все")])])]),a("button",{staticClass:"filter-form__btn filter-form__btn-grid filter-form__btn--active",attrs:{type:"submit",title:"В сетку"}}),a("button",{staticClass:"filter-form__btn filter-form__btn-list",attrs:{type:"submit",title:"Списком"}}),a("button",{staticClass:"filter-form__btn filter-form__btn-byname filter-form__btn--active",attrs:{type:"submit",title:"По имени"}},[t._v(" По имени ")]),a("button",{staticClass:"filter--form__btn filter-form__btn-bystatus",attrs:{type:"submit",title:"По статусу"}},[t._v(" По статусу ")])]),a("button",{staticClass:"add-task-button"},[t._v("+ Добавить задачу")])])}],g={name:"FilterBar"},C=g,T=(a("e4a8"),Object(c["a"])(C,p,h,!1,null,"692d7d0d",null)),y=T.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-list"},[a("div",{staticClass:"task-list__inner"},[t._l(t.tasksData,(function(t){return a("div",{key:t.id,staticClass:"column__wrapper"},[a("TaskListColumn",{ref:"column",refInFor:!0,attrs:{column:t}})],1)})),a("div",{staticClass:"task-list__column column"},[a("div",{staticClass:"column__header"},[a("button",{staticClass:"column__add-btn",attrs:{title:"Добавить колонку"},on:{click:t.addColumn}})])])],2)])},I=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-list__column column"},[a("div",{staticClass:"column__header column-title",style:t.initTitleStyleObj},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.columnTitle,expression:"columnTitle"}],ref:"titleText",staticClass:"column-title__text",class:{"column-title__text--active":t.isTitleEditable},attrs:{type:"text",tabindex:t.isTitleEditable?"0":"-1"},domProps:{value:t.columnTitle},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.titleTextBlur(e)},input:function(e){e.target.composing||(t.columnTitle=e.target.value)}}}),a("button",{staticClass:"column__delete-btn",class:{"column__delete-btn--show":t.isTitleEditable},on:{click:t.deleteColumn}},[t._v(" × ")]),a("button",{staticClass:"column__edit-btn",class:{"column__edit-btn--active":t.isTitleEditable},attrs:{title:"Редактировать колонку"},on:{click:t.editTitleText}})]),a("draggable",{attrs:{group:"tasks",list:t.column.tasks},on:{add:t.updateColumnTasks,remove:t.updateColumnTasks,update:t.updateColumnTasks}},t._l(t.column.tasks,(function(e){return a("Task",{key:e.id,ref:"taskItem",refInFor:!0,attrs:{colId:t.column.id,id:e.id}})})),1),a("div",{staticClass:"column__add-task-btn-wrapper"},[a("button",{staticClass:"column__add-task-btn",attrs:{title:"Добавить задачу"},on:{click:t.addTask}})])],1)},D=[],O=a("b76a"),E=a.n(O),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task",style:{borderLeftColor:this.bdLeftColor}},[a("div",{staticClass:"task__header"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskCategory,expression:"taskCategory"}],ref:"taskCategory",staticClass:"task__category",attrs:{type:"text",disabled:!t.isTaskEditable},domProps:{value:t.taskCategory},on:{input:function(e){e.target.composing||(t.taskCategory=e.target.value)}}}),a("button",{staticClass:"task__delete-btn",class:{"task__delete-btn--show":t.isTaskEditable},on:{click:t.deleteTask}},[t._v(" × ")]),a("button",{staticClass:"task__edit-btn",attrs:{title:"Редактировать задачу"},on:{click:t.editTaskHandler}})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskText,expression:"taskText"}],ref:"textarea",staticClass:"task__text",attrs:{disabled:!t.isTaskEditable,rows:"1"},domProps:{value:t.taskText},on:{input:[function(e){e.target.composing||(t.taskText=e.target.value)},t.areaAutoHeight]}})])},S=[],j=(a("a9e3"),{name:"Task",props:{colId:{type:Number,default:function(){return-1}},id:{type:Number,default:function(){return-1}},bdLeftColor:{type:String,default:function(){return"transparent"}}},data:function(){return{isTaskEditable:!1}},methods:{capitalizeText:function(t){return t},focusCategory:function(){var t=this;this.isTaskEditable=!0;var e=function e(a){var s=a.target;t.$el!==s.closest(".task")&&(t.isTaskEditable=!1,document.removeEventListener("click",e))};document.addEventListener("click",e),setTimeout((function(){return t.$refs.textarea.focus()}),0)},editTaskHandler:function(){var t=this;if(this.isTaskEditable=!this.isTaskEditable,this.isTaskEditable){var e=function e(a){var s=a.target;t.$el!==s.closest(".task")&&(t.isTaskEditable=!1,document.removeEventListener("click",e))};document.addEventListener("click",e),setTimeout((function(){return t.$refs.textarea.focus()}),0)}},deleteTask:function(){confirm("Удалить таск?")&&this.$store.dispatch("deleteTask",{colId:this.colId,id:this.id})},areaAutoHeight:function(){this.$refs.textarea.style.height="1px";var t=this.$refs.textarea.scrollHeight;this.$refs.textarea.style.height="".concat(t,"px")}},computed:{taskCategory:{get:function(){var t={colId:this.colId,id:this.id};return this.$store.getters.taskById(t).category},set:function(t){var e={colId:this.colId,id:this.id,category:t};this.$store.dispatch("updateTask",e)}},taskText:{get:function(){var t={colId:this.colId,id:this.id};return this.$store.getters.taskById(t).text},set:function(t){var e={colId:this.colId,id:this.id,text:t};this.$store.dispatch("updateTask",e)}}},mounted:function(){this.areaAutoHeight()}}),N=j,L=(a("1ad8"),Object(c["a"])(N,w,S,!1,null,"3ca37d40",null)),H=L.exports,P={name:"TaskListColumn",components:{Task:H,draggable:E.a},props:["column"],data:function(){return{initTitleStyleObj:{borderLeftColor:"transparent"},isTitleEditable:!1,isTaskDragging:!1}},methods:{editTitleText:function(){var t=this;if(this.isTitleEditable=!this.isTitleEditable,this.isTitleEditable){this.$refs.titleText.focus();var e=function e(a){var s=a.target;s.closest(".column-title")||(t.isTitleEditable=!1,document.removeEventListener("click",e))};document.addEventListener("click",e)}},deleteColumn:function(){confirm("Удалить колонку?")&&this.$store.dispatch("deleteColumn",this.column.id)},titleTextBlur:function(){this.$refs.titleText.blur(),this.isTitleEditable=!1},addTask:function(){var t=this,e={colId:this.column.id,id:Date.now(),category:this.columnTitle,text:""};this.$store.dispatch("createTask",e),setTimeout((function(){t.$refs.taskItem&&t.$refs.taskItem[t.$refs.taskItem.length-1].focusCategory()}),0)},updateColumnTasks:function(){this.$store.dispatch("updateColumnTasks",this.column)}},computed:{columnTitle:{get:function(){return this.$store.getters.columnTitleById(this.column.id)||this.column.title},set:function(t){var e={id:this.column.id,title:t};this.$store.dispatch("setColumnTitle",e)}}},mounted:function(){this.$store.getters.isNewColAdded&&(this.$refs.titleText.focus(),this.$store.dispatch("setNewColFlag",!1))}},B=P,F=(a("dace"),Object(c["a"])(B,$,D,!1,null,"86bad37c",null)),J=F.exports,A={name:"TaskList",components:{TaskListColumn:J},methods:{addColumn:function(){this.$store.dispatch("createColumn"),this.$store.dispatch("setNewColFlag",!0)}},computed:{tasksData:function(){return this.$store.getters.tasksData}},mounted:function(){this.$store.getters.tasksData.length<1&&!this.$store.getters.isNewColAdded&&this.$store.dispatch("createColumn")}},M=A,z=(a("6b2b"),Object(c["a"])(M,x,I,!1,null,"4bca3aae",null)),q=z.exports,G={name:"Home",components:{TaskList:q,FilterBar:y,LeftSidebar:b,Header:d}},K=G,Q=(a("75e2"),Object(c["a"])(K,s,i,!1,null,"5fa301ca",null));e["default"]=Q.exports},c6b61:function(t,e,a){},dace:function(t,e,a){"use strict";var s=a("9959"),i=a.n(s);i.a},e4a8:function(t,e,a){"use strict";var s=a("c6b61"),i=a.n(s);i.a}});
//# sourceMappingURL=app.38aed064.js.map